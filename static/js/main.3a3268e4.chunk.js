(this.webpackJsonpmuzika=this.webpackJsonpmuzika||[]).push([[0],{14:function(e,t,a){},27:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=(a(27),a(11)),s=a(6),i=(a(14),function(e){var t=e.link,a=e.name;return r.a.createElement(l.b,{exact:!0,to:t,className:"link",activeClassName:"linkSelected"},a)}),u=function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("span",{className:"logo"},"MuziKa!"),r.a.createElement("div",{className:"linkContainer"},r.a.createElement(i,{link:"/",name:"Game"}),r.a.createElement(i,{link:"/howtoplay",name:"How to Play"}),r.a.createElement(i,{link:"/about",name:"About"})))},m=a(22),d=a(8),p=a(1),f=a.n(p),h=[0,2,2,1,2,2,2],y=[0,3,4,0],E=[-3,0,2,4,7],k=["R/8","\u266d9","9","\u266d10","10","11","o12/TT","12","\u266d6","6","\u266d7","7"],v=function(){var e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],t=[];return[1,2,3,4,5,6,7].forEach((function(a){return e.forEach((function(e){return t.push("".concat(e).concat(a))}))})),t}(),g=function(e){return Math.floor(Math.random()*e)},b=function(e,t){for(var a=g(3),n=[],r=0;r<=2;r++)n.push(E[a+r]+e);return n.map((function(e){return t[e+14]}))},w=function(){var e,t=g(11),a=function(e,t,a){for(var n=[],r=function(e,r){t.forEach((function(e){r+=e,n.push(a[r])})),r++,o=r},c=1,o=e;c<6;c++)r(0,o);return n}(t,h,v),n=(e=a,y.map((function(t){return b(t,e)}))),r=function(e){var t=g(11);return{note:v[e+t+36],chordDegree:k[t]}}(t);return{scale:a,chords:n,chordProgression:y,mysteryNote:r,chordDegreeData:function(e,t){return t.map((function(t,a){return{name:t,note:v[e+a+36]}}))}(t,k)}},C=["I","IV","V","I",null,"mystery"],N=function(e){var t=e.measure,a=e.number,n=e.handleBlockClick,c=e.displayName,o=5===a&&"???"!==c?"mysteryBlock":"";return r.a.createElement("div",{onClick:function(){return n(a)},className:t===a?"musicBlockActive":"musicBlock"},r.a.createElement("span",{className:o},c))},O=function(e){var t=e.measure,a=e.handleBlockClick,n=e.mysteryBlockDisplay;return C.map((function(e,c){return(e="mystery"===e?n:e)?r.a.createElement(N,Object.assign({key:c,number:c},{handleBlockClick:a,measure:t,displayName:e})):null}))},j=function(e){var t=e.deg,a=e.handleGuessClick,n=e.isPlaying;return r.a.createElement("button",{value:t.name,disabled:t.disabled||n,clicked:t.clicked,onClick:function(){return a(t)}},t.name)},T=function(e){var t=e.data,a=e.handleGuessClick,n=e.isPlaying;return t.map((function(e){return r.a.createElement(j,Object.assign({key:e.name},{deg:e,handleGuessClick:a,isPlaying:n}))}))},B=function(e){var t=e.displayText;return r.a.createElement("div",{className:"statusBoard"},r.a.createElement("span",null," ",t," "))},A=function(e){var t=e.scoreBoard;return r.a.createElement("div",{className:"scoreBoard"},r.a.createElement("span",null,t.avgAttempts.toFixed(1)),r.a.createElement("span",null,Math.ceil(100*t.percent),"%"))},P=function(e){var t=e.scoreBoard,a=e.displayText;return r.a.createElement("div",{className:"statusContainer"},r.a.createElement(B,{displayText:a}),r.a.createElement(A,{scoreBoard:t}))},S=new f.a.PolySynth(3,f.a.FMSynth,{harmonicity:3.01,modulationIndex:14,oscillator:{type:"triangle"},envelope:{attack:.2,decay:.3,sustain:.1,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:.2,release:.1}}).toMaster(),M=new f.a.MonoSynth({oscillator:{type:"fmsquare5",modulationType:"triangle",modulationIndex:2,harmonicity:.501},filter:{Q:1,type:"lowpass",rolloff:-24},envelope:{attack:.01,decay:.1,sustain:.2,release:2},volume:-10,filterEnvelope:{attack:.01,decay:.1,sustain:.8,release:1.5,baseFrequency:50,octaves:4.4}}).toMaster(),D=new f.a.MonoSynth({oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.005,decay:3,sustain:0,release:.45},filterEnvelope:{attack:.001,decay:.32,sustain:.9,release:3,baseFrequency:700,octaves:2.3}}).toMaster(),x=new f.a.PolySynth(3,f.a.Synth,{oscillator:{type:"sawtooth"},volume:-16,filter:{Q:1,type:"lowpass",rolloff:-12},envelope:{attack:.1,decay:.1,sustain:.9,release:.3}}).toMaster(),G=function(e){f.a.Transport.scheduleOnce((function(t){x.triggerAttackRelease(e,"2n",t)}),"0:0")},I=function(e){var t=e.children,a=e.handleClick,n=e.isPlaying;return r.a.createElement("button",{disabled:n,onClick:a},t)},F=function(){var e=Object(n.useState)({correct:0,total:0,percent:"",avgAttempts:0}),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(d.a)(o,2),s=l[0],i=l[1],u=Object(n.useState)("off"),p=Object(d.a)(u,2),h=p[0],y=p[1],E=Object(n.useState)(!0),k=Object(d.a)(E,2),v=k[0],g=k[1],b=Object(n.useState)("???"),C=Object(d.a)(b,2),N=C[0],j=C[1],B=Object(n.useState)("Game Initiated: Click 'PLAY' hear the musical progression. Then guess a degree"),A=Object(d.a)(B,2),x=A[0],F=A[1],q=Object(n.useRef)({}),z=Object(n.useRef)(!1);f.a.Transport.timeSignature=[3,4],f.a.Transport.bpm.value=400;var K=Object(n.useCallback)((function(){var e=w();R(e),H(e.chordDegreeData,e.mysteryNote.chordDegree,i)}),[]);Object(n.useEffect)((function(){K(),setTimeout((function(){g(!1)}),900)}),[K]);var R=function(e){q.current=e},L=function(e){z.current=e},Y=function(e){c((function(t){return t.correct+=e,t.total++,t.attempts++,t.percent=t.correct/t.total,1===e&&(t.avgAttempts=t.total/t.correct),t}))},H=function(e,t,a){a(e.map((function(e){return{name:e.name,correct:t===e.name,clicked:"false",note:e.note}})))},V=function(){F("New Key, Guess a degree"),j("???"),L(!1),Q()},Q=function(){f.a.Transport.cancel(),y(0),function(e,t,a,n){var r=new f.a.Sequence((function(c,o){f.a.Draw.schedule((function(){e(o),0===o&&t(!0),7===o&&(e("off"),r.dispose(),a.current?n():t(!1))}),c)}),[0,1,2,3,4,5,6,7,"off"],"1m");r.start(0).stop("8m")}(y,g,z,V),function(e){var t="2n";f.a.Transport.scheduleOnce((function(a){D.triggerAttackRelease(e.mysteryNote.note,t,a)}),"5:0"),e.chords.map((function(e,a){return f.a.Transport.scheduleOnce((function(a){S.triggerAttackRelease(e,t,a)}),"".concat(a,":0"))})),e.chordProgression.map((function(a,n){return f.a.Transport.scheduleOnce((function(n){M.triggerAttackRelease(e.scale[a+7],t,n)}),"".concat(n,":0"))}))}(q.current),J()},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"+0.2";f.a.Transport.stop(),f.a.Transport.start(e)};return r.a.createElement("div",{className:"gameWrapper"},r.a.createElement(P,{scoreBoard:a,displayText:x}),r.a.createElement("div",{className:"userBtns"},r.a.createElement(I,{handleClick:Q,isPlaying:v},"PLAY"),r.a.createElement(I,{handleClick:function(){F("Key Changed"),K(),Q()},isPlaying:v},"KEY CHANGE")),r.a.createElement("div",{className:"musicBlockBoard"},r.a.createElement(O,{measure:h,handleBlockClick:function(e){if(!v){f.a.Transport.cancel(),y(e);var t;t=5!==e?q.current.chords[e]:[q.current.mysteryNote.note],function(e){var t=new f.a.Sequence((function(a,n){1===n&&(e("off"),t.dispose())}),[0,1],"1m");t.start(0).stop("2m")}(y),G(t),J()}},mysteryBlockDisplay:N})),r.a.createElement("div",{className:"answerBoard"},r.a.createElement(T,Object.assign({data:s},{handleGuessClick:function(e,t){var a,n;t||(e.correct?(F("Correct!"),L(!0),Q(),j(q.current.mysteryNote.chordDegree),Y(1),K(),y(0)):(F("".concat((n=e).name," is incorrect")),G(n.note),Y(0),J(),a=e.name,i((function(e){var t=Object(m.a)(e);return t.map((function(e){return e.disabled=e.name===a?e.disabled=!0:e.disabled,e})),t}))))},isPlaying:v}))))},q=function(){return r.a.createElement("div",{className:"textContainer"},r.a.createElement("h3",null,"About"),r.a.createElement("p",null,"Created by Matthew Crompton"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/mcromp/muzika"},"Link to github repo here!")),r.a.createElement("br",null),r.a.createElement("p",null,"Find me at ",r.a.createElement("a",{href:"https://www.linkedin.com/in/mcromp/"}," Linkedin "),"aswell"))},z=function(){return r.a.createElement("div",{className:"textContainer"},r.a.createElement("h3",null,"What is MuziKa?"),r.a.createElement("p",null,"MuziKa! is an ear-training program designed to help improve the player's harmonic comprehension."),r.a.createElement("h3",null,"Objective"),r.a.createElement("p",null,"The objective is to identify the mysterious tone (marked as '???'). Listen to the chord progression and try to determine how the final tone is harmonically related to the root chord (tonic)."),r.a.createElement("h3",null,"How to Play"),r.a.createElement("p",null,"Press the 'PLAY' button and a I-IV-V-I chord progression will sound followed by a single tone. At the bottom of the game board are 12 buttons representing the 12 possible chord degrees. The player must identify the correct chord degree of the 'mystery tone' (marked as '???') in relation to the progression's musical key. Play the chord progression as many times as necessary to internalize the scale of the key in relation to the mystery tone. To hear a single instance of any of the chords or the mystery tone click on its corresponding block. For a new key and mystery tone, select 'KEY CHANGE'. At the top right of the game board is an average of attempts followed by a percentage of correct."))},K=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(l.a,{basename:"/"},r.a.createElement(u,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:F}),r.a.createElement(s.a,{path:"/about",component:q}),r.a.createElement(s.a,{path:"/howtoplay",component:z}))))};o.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.3a3268e4.chunk.js.map